<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explainable ML: Critical Concepts Summary</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #475569;
            --accent: #f59e0b;
            --success: #16a34a;
            --danger: #dc2626;
            --bg: #f1f5f9;
            --card-bg: #ffffff;
            --text: #1e293b;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            background: linear-gradient(135deg, var(--primary), #1e40af);
            color: white;
            padding: 40px 20px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h1 { margin: 0; font-size: 2.5rem; }
        p.subtitle { opacity: 0.9; font-size: 1.1rem; margin-top: 10px; }

        /* Section Styling */
        section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary);
        }

        h2 {
            color: var(--primary);
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h3 {
            color: var(--secondary);
            margin-top: 20px;
        }

        /* Alert Box */
        .alert-box {
            background-color: #fef3c7;
            border: 1px solid #fcd34d;
            color: #92400e;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }

        .comparison-table th, .comparison-table td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }

        .comparison-table th {
            background-color: #f8fafc;
            color: var(--primary);
        }

        /* Formula Box */
        .formula-card {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Consolas', monospace;
            color: #1e3a8a;
        }

        /* Concept Grid */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .concept-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        .tag-reg { background: #dbeafe; color: #1e40af; }
        .tag-cls { background: #dcfce7; color: #166534; }

        /* Confusion Matrix Visualization */
        .matrix-container {
            display: grid;
            grid-template-columns: 100px 100px;
            gap: 5px;
            justify-content: center;
            margin: 20px 0;
        }
        .matrix-cell {
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            font-weight: bold;
            color: white;
        }
        .tp { background: var(--success); }
        .tn { background: #4ade80; }
        .fp { background: #f87171; }
        .fn { background: var(--danger); }

        code {
            background: #e2e8f0;
            padding: 2px 5px;
            border-radius: 4px;
            color: #c026d3;
            font-family: 'Consolas', monospace;
        }
    </style>
</head>
<body>

<div class="container">

    <header>
        <h1>Explainable ML: Critical Concepts</h1>
        <p class="subtitle">Summary for Exercise 1 & 2 ‚Ä¢ Core Problems Threshold Guide</p>
    </header>

    <!-- CRITICAL RULE -->
    <section style="border-left-color: var(--accent);">
        <h2>‚ö†Ô∏è The 70% Core Rule</h2>
        <div class="alert-box">
            <span>‚ö°</span>
            <div>
                You must achieve <strong>70%</strong> in the "Core Problems" (Exercise Content) to pass.
                <br>
                <small>If you fail this part, the rest of the exam is not graded.</small>
            </div>
        </div>
    </section>

    <!-- EXERCISE 1: FOUNDATIONS -->
    <section>
        <h2>1. Foundations (Exercise 1: Cardio)</h2>
        
        <h3>Data Preprocessing</h3>
        <p>Before training, data must be cleaned and formatted.</p>
        <ul class="concept-grid">
            <li class="concept-card">
                <strong>StandardScaler</strong><br>
                Transforms data so Mean = 0 and Variance = 1.<br>
                <em>Why?</em> Essential for algorithms like Logistic Regression & Neural Networks to converge.
            </li>
            <li class="concept-card">
                <strong>Label Encoding</strong><br>
                Converting categories to numbers.<br>
                <code>Male/Female</code> &rarr; <code>0/1</code>
            </li>
            <li class="concept-card">
                <strong>Logistic Regression</strong><br>
                Despite the name, it is a <strong>Classification</strong> algorithm.<br>
                <em>Feature Importance:</em> Check the <code>.coef_</code> (weights). Large weight = High importance.
            </li>
        </ul>

        <h3>Transparency Types (Theory)</h3>
        <table class="comparison-table">
            <tr>
                <th>Type</th>
                <th>Definition</th>
                <th>Example</th>
            </tr>
            <tr>
                <td><strong>Simulatability</strong></td>
                <td>Can a human run the model in their head?</td>
                <td>Small Decision Tree (Depth 3)</td>
            </tr>
            <tr>
                <td><strong>Decomposability</strong></td>
                <td>Can every part (input, parameter) be explained?</td>
                <td>Linear Regression (Coefficients)</td>
            </tr>
            <tr>
                <td><strong>Algorithmic</strong></td>
                <td>Do we understand how the model learns?</td>
                <td>Gradient Descent (Math guarantees)</td>
            </tr>
        </table>
    </section>

    <!-- EXERCISE 2: FLIGHT DELAYS -->
    <section>
        <h2>2. Regression vs. Classification (Exercise 2)</h2>
        <p>The Flight Delay exercise demonstrates how to frame the same problem in two ways.</p>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Regression <span class="tag tag-reg">Numeric</span></th>
                    <th>Classification <span class="tag tag-cls">Category</span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Goal</strong></td>
                    <td>Predict exact minutes</td>
                    <td>Predict Yes/No (Delayed?)</td>
                </tr>
                <tr>
                    <td><strong>Target (y)</strong></td>
                    <td><code>ARR_DELAY</code> (e.g., 25.4)</td>
                    <td><code>DELAY_15</code> (0 or 1)</td>
                </tr>
                <tr>
                    <td><strong>Metric</strong></td>
                    <td>RMSE, R¬≤</td>
                    <td>Accuracy, F1, Recall</td>
                </tr>
                <tr>
                    <td><strong>Model</strong></td>
                    <td>LinearRegression, DecisionTreeRegressor</td>
                    <td>LogisticRegression, DecisionTreeClassifier</td>
                </tr>
            </tbody>
        </table>

        <h3>The Golden Rule: Data Leakage</h3>
        <div class="alert-box" style="background-color: #fee2e2; border-color: #ef4444; color: #7f1d1d;">
            <span>üö´</span>
            <div>
                <strong>NEVER include the Target in the Input (X).</strong><br>
                You must <code>X = df.drop(columns=['ARR_DELAY'])</code>. If you don't, the model "cheats" and gets a perfect score (Data Leakage).
            </div>
        </div>
    </section>

    <!-- METRICS CHEAT SHEET -->
    <section>
        <h2>3. Metrics Cheat Sheet</h2>
        
        <h3>Regression Metrics (Distance)</h3>
        <div class="formula-card">
            <strong>RMSE (Root Mean Squared Error):</strong><br>
            ‚àö(Average of (Predicted - Actual)¬≤) <br>
            <em>Lower is better. Measures error in minutes.</em>
        </div>
        <div class="formula-card">
            <strong>R¬≤ (R-Squared):</strong><br>
            1.0 = Perfect Fit | 0.0 = Guessing the Mean<br>
            <em>Higher is better. Measures "Variance Explained".</em>
        </div>

        <h3>Classification Metrics (Confusion Matrix)</h3>
        <p style="text-align: center; margin-bottom: 5px;">Visualizing True vs. Predicted</p>
        <div class="matrix-container">
            <div class="matrix-cell tn">True Negative<br>(On Time)</div>
            <div class="matrix-cell fp">False Positive<br>(False Alarm)</div>
            <div class="matrix-cell fn">False Negative<br>(Missed Delay!)</div>
            <div class="matrix-cell tp">True Positive<br>(Caught Delay)</div>
        </div>

        <ul class="concept-grid">
            <li class="concept-card">
                <strong>Accuracy</strong><br>
                (TP + TN) / Total<br>
                <em>Overall correctness.</em>
            </li>
            <li class="concept-card">
                <strong>Recall (Sensitivity)</strong><br>
                TP / (TP + FN)<br>
                <em>"Did we catch all the delays?" (Crucial for safety).</em>
            </li>
            <li class="concept-card">
                <strong>Precision</strong><br>
                TP / (TP + FP)<br>
                <em>"When we said 'Delay', were we right?"</em>
            </li>
        </ul>
    </section>

    <!-- PYTHON COMMANDS -->
    <section>
        <h2>4. Python Code Quick Reference</h2>
        <p>Memorize these commands for the "Programming" part of the Core Problems.</p>
        
        <table class="comparison-table">
            <tr>
                <td><strong>Load Data</strong></td>
                <td><code>df = pd.read_csv("file.csv")</code></td>
            </tr>
            <tr>
                <td><strong>Drop Column</strong></td>
                <td><code>df.drop(columns=["target"], inplace=True)</code></td>
            </tr>
            <tr>
                <td><strong>Drop Missing Target</strong></td>
                <td><code>df.dropna(subset=["ARR_DELAY"])</code> <br><em>(Never fill Target with 0!)</em></td>
            </tr>
            <tr>
                <td><strong>Create Binary Target</strong></td>
                <td><code>df['is_late'] = (df['delay'] > 15).astype(int)</code></td>
            </tr>
            <tr>
                <td><strong>Split Data</strong></td>
                <td><code>train_test_split(X, y, test_size=0.2, random_state=42)</code></td>
            </tr>
            <tr>
                <td><strong>Correlation</strong></td>
                <td><code>X.corrwith(y)</code></td>
            </tr>
        </table>
    </section>

</div>

</body>
</html>