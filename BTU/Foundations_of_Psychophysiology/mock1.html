<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychophysiology - Final Mock Examination</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none; }
            .print-only { display: block; }
            body { background-color: white; }
            .question-container { break-inside: avoid; }
        }
        .correct { background-color: #d1fae5; border-color: #10b981; }
        .incorrect { background-color: #fee2e2; border-color: #ef4444; }
        .selected { border-color: #3b82f6; background-color: #eff6ff; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans text-gray-900 pb-20">

    <div id="app" class="max-w-4xl mx-auto p-4 md:p-8">
        <!-- Header -->
        <header class="bg-white rounded-xl shadow-sm p-6 mb-8 border-b-4 border-blue-600">
            <h1 class="text-3xl font-bold text-gray-800">Psychophysiology: Final Mock Exam</h1>
            <p class="text-gray-500 mt-2">Time: 90 Minutes | Total Marks: 100</p>
            <div class="mt-4 flex flex-wrap gap-2 no-print">
                <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Chapters 1-8</span>
                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Past Paper Style</span>
                <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Interactive Grading</span>
            </div>
        </header>

        <!-- Exam Content -->
        <div id="exam-view">
            <form id="quiz-form">
                <div id="questions-list" class="space-y-6">
                    <!-- Questions will be dynamically loaded here -->
                </div>

                <div class="mt-12 flex justify-center no-print">
                    <button type="button" onclick="gradeExam()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-12 rounded-full shadow-lg transition-transform active:scale-95 text-xl">
                        Check Score Now
                    </button>
                </div>
            </form>
        </div>

        <!-- Results View (Hidden initially) -->
        <div id="results-view" class="hidden space-y-8 animate-in fade-in duration-500">
            <div class="bg-white rounded-xl shadow-md p-8 text-center border-t-8 border-green-500">
                <h2 class="text-4xl font-extrabold text-gray-800">Examination Results</h2>
                <div class="my-6">
                    <span id="score-display" class="text-6xl font-black text-blue-600">0/50</span>
                    <p id="grade-comment" class="text-xl text-gray-600 mt-2 font-medium"></p>
                </div>
                <button onclick="window.print()" class="no-print bg-gray-800 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition">
                    Save as PDF / Print Results
                </button>
            </div>

            <div class="bg-yellow-50 border-l-8 border-yellow-400 p-8 rounded-r-xl shadow-sm">
                <h3 class="text-2xl font-bold text-yellow-800 mb-4 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path></svg>
                    Important Topics to Remember
                </h3>
                <div id="study-notes" class="grid grid-cols-1 md:grid-cols-2 gap-6 text-yellow-900 leading-relaxed">
                    <!-- Dynamic review topics based on weak areas could go here, but we will show the top 5 must-knows -->
                    <div>
                        <h4 class="font-bold border-b border-yellow-200 pb-1 mb-2">1. The EEG Source</h4>
                        <p class="text-sm">Never confuse EEG with action potentials. It is the summation of <strong>Post-synaptic Potentials (PSPs)</strong> in pyramidal cells. Synchronous firing and parallel orientation are requirements for detection at the scalp.</p>
                    </div>
                    <div>
                        <h4 class="font-bold border-b border-yellow-200 pb-1 mb-2">2. Autonomic Specificity</h4>
                        <p class="text-sm">EDA is your "Gold Standard" for pure <strong>Sympathetic</strong> arousal. Unlike the heart (dual-innervated), skin sweat glands lack parasympathetic input. High HRV is a sign of good parasympathetic (Vagal) tone.</p>
                    </div>
                    <div>
                        <h4 class="font-bold border-b border-yellow-200 pb-1 mb-2">3. Signal Processing Rules</h4>
                        <p class="text-sm">Always sample at least <strong>twice</strong> the frequency of your signal (Nyquist). Use <strong>Notch filters</strong> specifically for power line noise (50/60Hz). Rectify EMG to turn negative dips into positive power.</p>
                    </div>
                    <div>
                        <h4 class="font-bold border-b border-yellow-200 pb-1 mb-2">4. Design Validity</h4>
                        <p class="text-sm"><strong>Internal Validity</strong> is about causal control; <strong>Ecological Validity</strong> is about real-world relevance. Use <strong>Counterbalancing</strong> to eliminate order effects like fatigue in within-subject designs.</p>
                    </div>
                    <div>
                        <h4 class="font-bold border-b border-yellow-200 pb-1 mb-2">5. ERP Methodology</h4>
                        <p class="text-sm">Individual EEG trials are noisy. We use <strong>Averaging</strong> to increase the Signal-to-Noise Ratio (SNR). The ERP is the portion of the signal that is time-locked to the specific event.</p>
                    </div>
                </div>
            </div>

            <div id="review-list" class="space-y-4">
                <h3 class="text-2xl font-bold text-gray-800 px-2">Detailed Answer Review</h3>
                <!-- Re-rendered list of questions with correct answers highlighted -->
            </div>
        </div>
    </div>

    <script>
        const questionBank = [
            // Chapter 1 & 2
            { q: "In psychophysiological research, what is typically the Independent Variable (IV)?", options: ["The physiological measure", "A behavioral or psychological manipulation", "Both are physiological", "The personality of the participant"], a: 1 },
            { q: "Which philosophical view suggests that the mind and body are one and the same?", options: ["Dualism", "Phrenology", "Monism", "Structuralism"], a: 2 },
            { q: "The central nervous system (CNS) consists of:", options: ["The brain and nerves", "The brain and spinal cord", "The autonomic and somatic systems", "The nerves in the limbs"], a: 1 },
            { q: "Which system is referred to as the 'Fight or Flight' system?", options: ["Parasympathetic", "Somatic", "Sympathetic", "Peripheral"], a: 2 },
            { q: "Afferent neurons carry information:", options: ["Away from the CNS to the muscles", "Towards the CNS from the sensors", "Between the two hemispheres", "To the digestive tract only"], a: 1 },
            { q: "Which ion rushing into the cell causes depolarization in an action potential?", options: ["Potassium (K+)", "Chloride (Cl-)", "Sodium (Na+)", "Calcium (Ca2+)"], a: 2 },
            { q: "The 'All-or-None' law applies to which of the following?", options: ["Muscle contraction strength", "The firing of an action potential", "Graded potentials", "The speed of digestion"], a: 1 },
            { q: "The 'gap' in the myelin sheath that allows saltatory conduction is called:", options: ["The Synapse", "Node of Ranvier", "Axon Hillock", "Dendritic Spine"], a: 1 },
            { q: "Which part of the brain is the primary relay station for sensory information?", options: ["Hypothalamus", "Cerebellum", "Thalamus", "Hippocampus"], a: 2 },
            { q: "The Occipital lobe is primarily responsible for:", options: ["Hearing", "Vision", "Motor Control", "Personality"], a: 1 },

            // Chapter 3 & 4
            { q: "Impedance is a measure of resistance specifically for:", options: ["Direct Current (DC)", "Alternating Current (AC)", "Static electricity", "Biological heat"], a: 1 },
            { q: "What is the Nyquist frequency if your sampling rate is 500 Hz?", options: ["1000 Hz", "250 Hz", "500 Hz", "100 Hz"], a: 1 },
            { q: "Which filter is used to remove a specific frequency like 50 Hz power line noise?", options: ["High-pass filter", "Low-pass filter", "Notch filter", "Band-pass filter"], a: 2 },
            { q: "A 'Within-Subjects' design is preferred because:", options: ["It requires more participants", "It controls for individual differences (lower variability)", "It is easier to set up", "It prevents fatigue"], a: 1 },
            { q: "Counterbalancing is a technique used to eliminate:", options: ["Experimental bias", "Hardware noise", "Order effects (like fatigue/learning)", "Confederates"], a: 2 },
            { q: "Ecological validity refers to:", options: ["The precision of the electrodes", "Generalization to real-world settings", "The causal control in a lab", "The ethics of the study"], a: 1 },
            { q: "A 'Control Variable' is one that is:", options: ["Manipulated by the experimenter", "Measured as the result", "Kept constant to prevent confounding", "The same as the Dependent Variable"], a: 2 },
            { q: "Tonic activity in psychophysiology refers to:", options: ["A sudden response to a loud noise", "The slow-varying baseline level", "The speed of neural transmission", "The strength of a muscle"], a: 1 },
            { q: "Which validity is threatened if an experiment has a 'Confound'?", options: ["Internal Validity", "External Validity", "Predictive Validity", "Face Validity"], a: 0 },
            { q: "Habituation refers to:", options: ["An increase in response over time", "A decrease in response to repeated identical stimuli", "A permanent change in personality", "The process of skin preparation"], a: 1 },

            // Chapter 5 & 6
            { q: "A 'Motor Unit' consists of:", options: ["A group of muscles working together", "One motor neuron and all muscle fibers it innervates", "The brain's motor cortex only", "One muscle fiber and one neuron"], a: 1 },
            { q: "Which facial muscle is typically associated with smiling?", options: ["Corrugator supercilii", "Orbicularis oculi", "Zygomaticus major", "Masseter"], a: 2 },
            { q: "The process of 'Rectification' in EMG processing means:", options: ["Filtering out high frequencies", "Converting negative amplitudes to positive", "Smoothing the data for an average", "Changing the sampling rate"], a: 1 },
            { q: "Which neurotransmitter is released at the neuromuscular junction?", options: ["Dopamine", "Serotonin", "Acetylcholine (ACh)", "GABA"], a: 2 },
            { q: "The 'pacemaker' of the heart is the:", options: ["AV Node", "Bundle of His", "SA Node (Sinoatrial)", "Purkinje Fibers"], a: 2 },
            { q: "In an ECG, the P-wave represents:", options: ["Ventricular contraction", "Atrial contraction", "Ventricular recovery", "Heart valve closing"], a: 1 },
            { q: "The QRS complex in an ECG specifically indicates:", options: ["Atrial recovery", "Ventricular depolarization", "Aortic pressure", "Blood volume"], a: 1 },
            { q: "High Heart Rate Variability (HRV) is generally associated with:", options: ["High stress levels", "Better emotional regulation/Vagal tone", "Chronic fatigue", "Impending heart failure"], a: 1 },
            { q: "Blood Pressure is usually reported as:", options: ["Diastolic / Systolic", "Systolic / Diastolic", "Pulse / Pressure", "Mean / Average"], a: 1 },
            { q: "Plethysmography measures changes in:", options: ["Electrical potential", "Blood volume", "Heart sound", "Sweat production"], a: 1 },

            // Chapter 7 & 8
            { q: "EDA (Electrodermal Activity) is primarily controlled by which glands?", options: ["Apocrine glands", "Eccrine glands", "Sebaceous glands", "Thyroid glands"], a: 1 },
            { q: "Unlike the heart, the EDA response has NO innervation from which system?", options: ["Sympathetic", "Parasympathetic", "Somatic", "Central"], a: 1 },
            { q: "Skin Conductance (SC) is measured in:", options: ["Millivolts (mV)", "Ohms (Ω)", "Microsiemens (µS)", "Amperes (A)"], a: 2 },
            { q: "An 'SCR' (Skin Conductance Response) is which type of activity?", options: ["Tonic", "Phasic", "Spontaneous only", "Slow-moving baseline"], a: 1 },
            { q: "EDA is a highly sensitive measure of emotional:", options: ["Valence (positive/negative)", "Arousal", "Complexity", "Duration"], a: 1 },
            { q: "What is the primary physiological source of scalp-recorded EEG?", options: ["Action Potentials", "Post-synaptic Potentials (PSPs)", "Brain blood flow", "Skull vibration"], a: 1 },
            { q: "In the 10-20 EEG system, odd-numbered electrodes (e.g., F3, P7) are on the:", options: ["Right hemisphere", "Left hemisphere", "Midline", "Cerebellum"], a: 1 },
            { q: "The 'Alpha' rhythm (8-13 Hz) is most prominent when a person is:", options: ["In deep sleep", "Awake but relaxed with eyes closed", "Engaged in complex math", "Frightened"], a: 1 },
            { q: "Event-Related Potentials (ERPs) are found by:", options: ["Filtering for 50Hz noise", "Averaging multiple trials", "Measuring skull thickness", "Applying gel"], a: 1 },
            { q: "Volume conduction in the brain means that:", options: ["The brain is a poor conductor", "Activity from one area spread and is seen by many electrodes", "Sound is amplified in the skull", "EEG signals are only seen directly above the source"], a: 1 },

            // Bonus/Past Paper Mix
            { q: "Which philosophical position was Descartes associated with?", options: ["Dualism", "Monism", "Behaviorism", "Connectionism"], a: 0 },
            { q: "The 'Mu' rhythm (8-13 Hz) desynchronizes when a person:", options: ["Closes their eyes", "Moves or imagines movement", "Starts dreaming", "Breathes deeply"], a: 1 },
            { q: "A 'Spontaneous' SCR occurs:", options: ["Only when a light flashes", "Without an identifiable external stimulus", "When the participant talks", "Only in the morning"], a: 1 },
            { q: "The 'Orienting Response' is triggered by:", options: ["Familiar stimuli", "Novel or significant stimuli", "Closing eyes", "Eating"], a: 1 },
            { q: "EEG has excellent ______ resolution but poor ______ resolution.", options: ["Spatial, Temporal", "Temporal, Spatial", "Visual, Auditory", "Internal, External"], a: 1 },
            { q: "A low-pass filter allows ______ frequencies to pass through.", options: ["Only high", "Only low", "All", "No"], a: 1 },
            { q: "RSA (Respiratory Sinus Arrhythmia) is a modulation of HR by:", options: ["Light", "Breathing", "Temperature", "Pain"], a: 1 },
            { q: "What is the 'Ibn Sina' method related to in history?", options: ["EEG", "Pulse/Heart rate during love-sickness", "Brain surgery", "Skin conductance"], a: 1 },
            { q: "Electrocorticography (ECoG) is different from EEG because:", options: ["It uses light", "Electrodes are placed directly on the brain surface (invasive)", "It is much cheaper", "It only measures the skin"], a: 1 },
            { q: "Psychophysiological inference is usually:", options: ["One-to-One", "Many-to-Many or Many-to-One", "Simple and direct", "Always causal"], a: 1 }
        ];

        let userAnswers = new Array(questionBank.length).fill(null);

        function renderQuestions() {
            const list = document.getElementById('questions-list');
            list.innerHTML = '';
            questionBank.forEach((qObj, index) => {
                const div = document.createElement('div');
                div.className = "bg-white p-6 rounded-xl shadow-sm border border-gray-200 question-container";
                div.innerHTML = `
                    <p class="font-bold text-gray-800 mb-4">${index + 1}. ${qObj.q}</p>
                    <div class="space-y-2">
                        ${qObj.options.map((opt, optIdx) => `
                            <label class="block p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition flex items-center space-x-3" id="label-${index}-${optIdx}">
                                <input type="radio" name="q${index}" value="${optIdx}" onclick="saveAnswer(${index}, ${optIdx})" class="w-4 h-4 text-blue-600">
                                <span class="text-gray-700">${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function saveAnswer(qIdx, optIdx) {
            userAnswers[qIdx] = optIdx;
            // Clear previous highlighting
            for(let i=0; i<4; i++){
                document.getElementById(`label-${qIdx}-${i}`).classList.remove('selected');
            }
            document.getElementById(`label-${qIdx}-${optIdx}`).classList.add('selected');
        }

        function gradeExam() {
            let score = 0;
            const reviewList = document.getElementById('review-list');
            reviewList.innerHTML = '<h3 class="text-2xl font-bold text-gray-800 px-2 mt-8 mb-4">Detailed Answer Review</h3>';

            questionBank.forEach((qObj, index) => {
                const isCorrect = userAnswers[index] === qObj.a;
                if (isCorrect) score++;

                const reviewDiv = document.createElement('div');
                reviewDiv.className = `p-4 rounded-lg border mb-4 ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`;
                
                reviewDiv.innerHTML = `
                    <p class="font-bold text-sm mb-1">Question ${index + 1}: ${isCorrect ? '✅ Correct' : '❌ Incorrect'}</p>
                    <p class="text-gray-800">${qObj.q}</p>
                    <p class="text-sm mt-2 font-medium">
                        Your answer: <span class="${isCorrect ? 'text-green-700' : 'text-red-700'}">${userAnswers[index] !== null ? qObj.options[userAnswers[index]] : 'Not Answered'}</span><br>
                        Correct answer: <span class="text-green-700 font-bold">${qObj.options[qObj.a]}</span>
                    </p>
                `;
                reviewList.appendChild(reviewDiv);
            });

            document.getElementById('score-display').innerText = `${score} / ${questionBank.length}`;
            
            let comment = "";
            if(score >= 45) comment = "Excellent! You have a mastery level understanding.";
            else if(score >= 35) comment = "Great job! You are well-prepared for the exam.";
            else if(score >= 25) comment = "Good effort, but review the 'Important Topics' section below.";
            else comment = "Review the materials and try again. Focus on the core principles.";
            
            document.getElementById('grade-comment').innerText = comment;

            // Scroll to results
            document.getElementById('results-view').classList.remove('hidden');
            document.getElementById('results-view').scrollIntoView({ behavior: 'smooth' });
            document.getElementById('exam-view').classList.add('no-print');
        }

        window.onload = renderQuestions;
    </script>
</body>
</html>